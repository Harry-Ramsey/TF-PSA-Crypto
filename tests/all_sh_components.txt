component_test_default_cmake_gcc_asan () {
    msg "build: default, gcc, ASan"

    PSA_CRYPTO_ROOT_DIR="$PWD"
    mkdir "$OUT_OF_SOURCE_DIR"
    cd "$OUT_OF_SOURCE_DIR"
    cmake -D CMAKE_BUILD_TYPE:String=Asan "$PSA_CRYPTO_ROOT_DIR"
    make

    msg "test: main suites (ASan build)"
    make test

    cd "$PSA_CRYPTO_ROOT_DIR"
    rm -rf "$OUT_OF_SOURCE_DIR"
}

component_test_ccm_aes_sha256() {
    msg "build: ccm-aes-sha256.h, gcc, ASan"

    PSA_CRYPTO_ROOT_DIR="$PWD"
    mkdir "$OUT_OF_SOURCE_DIR"
    cd "$OUT_OF_SOURCE_DIR"
    cmake -D CMAKE_BUILD_TYPE:String=Asan -D CMAKE_C_FLAGS='-D PSA_CRYPTO_CONFIG_FILE=\"../configs/ccm-aes-sha256.h\"' "$PSA_CRYPTO_ROOT_DIR"
    make

    msg "test: main suites"
    make test

    cd "$PSA_CRYPTO_ROOT_DIR"
    rm -rf "$OUT_OF_SOURCE_DIR"
}

component_test_ccm_aes_sha256_secp256r1() {
    msg "build: ccm-aes-sha256-secp256r1.h, gcc, ASan"

    PSA_CRYPTO_ROOT_DIR="$PWD"
    mkdir "$OUT_OF_SOURCE_DIR"
    cd "$OUT_OF_SOURCE_DIR"
    cmake -D CMAKE_BUILD_TYPE:String=Asan -D CMAKE_C_FLAGS='-D PSA_CRYPTO_CONFIG_FILE=\"../configs/ccm-aes-sha256-secp256r1.h\"' "$PSA_CRYPTO_ROOT_DIR"
    make

    msg "test: main suites"
    make test

    cd "$PSA_CRYPTO_ROOT_DIR"
    rm -rf "$OUT_OF_SOURCE_DIR"
}
